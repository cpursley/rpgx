worker_processes  8;
error_log logs/error.log;

events {
  worker_connections 1024;
}

http {
  upstream database {
    postgres_server 127.0.0.1 dbname=<%= database_name %> user=<%= database_user %> password=;
  }

  server {
    listen 8888;

    location = '/hello' {
      # usage: CURL http://localhost:8888/hello?person=<%= database_user %>
      set_unescape_uri $person $arg_person;
      echo "hello, $person!";
    }

<%= route_content %>
  }
}
